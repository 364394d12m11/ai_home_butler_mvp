/* ========== 全局样式重构 (miniprogram/app.wxss) ========== */

/* 原有基础保持，但升级为玻璃化 */
.page { 
  background: linear-gradient(180deg, #fefbf8 0%, #faf9f6 100%); 
  min-height: 100vh; 
  position: relative;
}

.section { 
  margin: 24rpx; 
}

/* 核心：玻璃化卡片 */
.card { 
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(20rpx);
  border: 1rpx solid rgba(255, 255, 255, 0.3);
  border-radius: 28rpx; 
  padding: 32rpx; 
  box-shadow: 
    0 8rpx 32rpx rgba(0, 0, 0, 0.04),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.8);
  transition: all 300ms ease;
}

.card:hover {
  transform: translateY(-4rpx);
  box-shadow: 
    0 16rpx 48rpx rgba(0, 0, 0, 0.08),
    inset 0 1rpx 0 rgba(255, 255, 255, 1);
}

/* 夜晚模式的玻璃效果 */
.card.dark { 
  background: rgba(255, 255, 255, 0.1);
  border: 1rpx solid rgba(255, 255, 255, 0.15);
  box-shadow: 
    0 8rpx 32rpx rgba(0, 0, 0, 0.3),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.2);
}

.title { 
  font-size: 32rpx; 
  font-weight: 600; 
  color: #1B1B1F; 
  letter-spacing: -0.2rpx;
}

.sub { 
  color: rgba(0, 0, 0, 0.6); 
  font-size: 24rpx; 
  font-weight: 400;
}

.row { 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
}

.btn-primary { 
  background: linear-gradient(135deg, #F6A44C 0%, #FF8C42 100%);
  color: #fff; 
  padding: 20rpx 28rpx; 
  border-radius: 24rpx;
  font-weight: 600;
  box-shadow: 
    0 8rpx 24rpx rgba(246, 164, 76, 0.3),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.2);
  transition: all 200ms ease;
}

.btn-primary:active {
  transform: scale(0.96);
  box-shadow: 
    0 4rpx 16rpx rgba(246, 164, 76, 0.4),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.3);
}

.tag { 
  background: rgba(246, 164, 76, 0.15); 
  color: #F6A44C; 
  border: 1rpx solid rgba(246, 164, 76, 0.3);
  border-radius: 24rpx; 
  padding: 8rpx 16rpx; 
  font-size: 22rpx;
  font-weight: 500;
  backdrop-filter: blur(8rpx);
}

/* ========== 首页专用增强样式 ========== */

/* 天气背景层 - 支持动态主题 */
.weather-page {
  min-height: 100vh;
  position: relative;
  padding: 32rpx;
  background: var(--weather-bg, linear-gradient(180deg, #fefbf8 0%, #faf9f6 100%));
  transition: background 800ms ease;
  overflow: hidden;
}

/* 动态背景层 */
.weather-bg {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: -1;
  transition: all 800ms ease;
}

/* 云朵系统 */
.cloud-system {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  overflow: hidden;
  opacity: 0.4;
  transition: opacity 500ms ease;
}

.cloud {
  position: absolute;
  animation: cloudFloat 30s linear infinite;
}

.cloud-layer {
  position: absolute;
  background: linear-gradient(90deg, 
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.3) 20%,
    rgba(255,255,255,0.6) 50%,
    rgba(255,255,255,0.3) 80%,
    rgba(255,255,255,0) 100%);
  border-radius: 200rpx;
  filter: blur(2rpx);
}

.cloud1 {
  top: 120rpx;
  left: -240rpx;
  animation-duration: 35s;
}

.cloud1 .cloud-layer:nth-child(1) {
  width: 160rpx;
  height: 24rpx;
}

.cloud1 .cloud-layer:nth-child(2) {
  width: 120rpx;
  height: 16rpx;
  top: 12rpx;
  left: 30rpx;
  animation-delay: -3s;
}

.cloud2 {
  top: 200rpx;
  left: -200rpx;
  animation-duration: 40s;
  animation-delay: -15s;
}

.cloud2 .cloud-layer:nth-child(1) {
  width: 180rpx;
  height: 20rpx;
}

.cloud2 .cloud-layer:nth-child(2) {
  width: 140rpx;
  height: 14rpx;
  top: 10rpx;
  left: 24rpx;
}

.cloud3 {
  top: 160rpx;
  left: -280rpx;
  animation-duration: 45s;
  animation-delay: -25s;
}

.cloud3 .cloud-layer:nth-child(1) {
  width: 200rpx;
  height: 28rpx;
}

.cloud3 .cloud-layer:nth-child(2) {
  width: 150rpx;
  height: 18rpx;
  top: 14rpx;
  left: 36rpx;
}

@keyframes cloudFloat {
  0% { transform: translateX(0); }
  100% { transform: translateX(calc(375px + 300rpx)); }
}

/* 太阳系统 */
.sun-system {
  position: absolute;
  top: 120rpx;
  right: 80rpx;
  width: 80rpx;
  height: 80rpx;
  background: radial-gradient(circle at 30% 30%, #FFD700 0%, #FFA500 100%);
  border-radius: 50%;
  box-shadow: 
    0 0 40rpx rgba(255, 215, 0, 0.4),
    0 0 80rpx rgba(255, 215, 0, 0.2);
  animation: sunGlow 4s ease-in-out infinite alternate;
}

.sun-system::before {
  content: '';
  position: absolute;
  top: -20rpx;
  left: -20rpx;
  right: -20rpx;
  bottom: -20rpx;
  background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
  border-radius: 50%;
  animation: sunRays 8s linear infinite;
}

@keyframes sunGlow {
  0% { 
    box-shadow: 
      0 0 40rpx rgba(255, 215, 0, 0.4),
      0 0 80rpx rgba(255, 215, 0, 0.2);
  }
  100% { 
    box-shadow: 
      0 0 60rpx rgba(255, 215, 0, 0.6),
      0 0 120rpx rgba(255, 215, 0, 0.3);
  }
}

@keyframes sunRays {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 雨滴系统 */
.rain-system {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  opacity: 0;
  transition: opacity 500ms ease;
}

.rain-system.active {
  opacity: 1;
}

.raindrop {
  position: absolute;
  width: 2rpx;
  height: 40rpx;
  background: linear-gradient(to bottom, 
    rgba(174,194,224,0) 0%, 
    rgba(174,194,224,0.6) 100%);
  border-radius: 0 0 2rpx 2rpx;
  animation: rainfall 1s linear infinite;
}

@keyframes rainfall {
  to { transform: translateY(100vh); }
}

/* 增强版AI问候卡片 */
.greeting-card {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(24rpx);
  border: 1rpx solid rgba(255, 255, 255, 0.4);
  border-radius: 32rpx;
  padding: 40rpx;
  margin-bottom: 48rpx;
  box-shadow: 
    0 12rpx 48rpx rgba(0, 0, 0, 0.06),
    inset 0 2rpx 0 rgba(255, 255, 255, 0.8);
  animation: greetingFadeIn 800ms ease-out;
}

@keyframes greetingFadeIn {
  from { 
    opacity: 0; 
    transform: translateY(-20rpx) scale(0.98); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
}

/* 快捷操作网格增强 */
.actions-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16rpx;
  margin: 32rpx 0;
}

.action-item {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(16rpx);
  border: 1rpx solid rgba(255, 255, 255, 0.3);
  border-radius: 24rpx;
  padding: 32rpx 16rpx;
  text-align: center;
  box-shadow: 
    0 8rpx 24rpx rgba(0, 0, 0, 0.04),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.6);
  transition: all 250ms ease;
}

.action-item:active {
  transform: translateY(-4rpx) scale(0.98);
  box-shadow: 
    0 16rpx 40rpx rgba(0, 0, 0, 0.08),
    inset 0 2rpx 0 rgba(255, 255, 255, 0.8);
}

.action-icon {
  font-size: 40rpx;
  margin-bottom: 12rpx;
  display: block;
}

.action-text {
  font-size: 22rpx;
  color: rgba(0, 0, 0, 0.7);
  font-weight: 500;
}

/* 模块卡片增强 */
.module-card {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20rpx);
  border: 1rpx solid rgba(255, 255, 255, 0.3);
  border-radius: 28rpx;
  padding: 32rpx;
  margin-bottom: 32rpx;
  box-shadow: 
    0 8rpx 32rpx rgba(0, 0, 0, 0.06),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.7);
  transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

.module-card:active {
  transform: translateY(-6rpx);
  box-shadow: 
    0 16rpx 48rpx rgba(0, 0, 0, 0.1),
    inset 0 2rpx 0 rgba(255, 255, 255, 0.9);
}

/* 天气主题变量 */
.weather-page.clear {
  --weather-bg: linear-gradient(180deg, #fffaf4 0%, #ffecc7 100%);
}

.weather-page.cloudy {
  --weather-bg: linear-gradient(180deg, #f6f3ef 0%, #e8e5e1 100%);
}

.weather-page.rain {
  --weather-bg: linear-gradient(180deg, #e9f0f6 0%, #d3e1ee 100%);
}

.weather-page.night {
  --weather-bg: linear-gradient(180deg, #0f1115 0%, #1c1f24 100%);
}

/* 夜晚模式下的玻璃效果调整 */
.weather-page.night .card,
.weather-page.night .greeting-card,
.weather-page.night .action-item,
.weather-page.night .module-card {
  background: rgba(255, 255, 255, 0.1);
  border: 1rpx solid rgba(255, 255, 255, 0.15);
  box-shadow: 
    0 8rpx 32rpx rgba(0, 0, 0, 0.4),
    inset 0 1rpx 0 rgba(255, 255, 255, 0.2);
}

.weather-page.night .title {
  color: rgba(255, 255, 255, 0.9);
}

.weather-page.night .sub,
.weather-page.night .action-text {
  color: rgba(255, 255, 255, 0.6);
}

/* 降级支持（不支持 backdrop-filter 的设备） */
@supports not (backdrop-filter: blur(20rpx)) {
  .card,
  .greeting-card,
  .action-item,
  .module-card {
    background: rgba(255, 255, 255, 0.95);
  }
  
  .weather-page.night .card,
  .weather-page.night .greeting-card,
  .weather-page.night .action-item,
  .weather-page.night .module-card {
    background: rgba(40, 40, 50, 0.9);
  }
}